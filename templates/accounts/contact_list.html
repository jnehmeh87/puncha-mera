{% extends 'base.html' %}

{% block content %}
<style>
  .table-fixed {
    table-layout: fixed;
    width: 100%;
  }
  .table-fixed th, .table-fixed td {
    width: 25%;
  }
  .nav-tabs .nav-link.active {
    border-color: #00aaff;
  }
  .nav-tabs .nav-link:hover {
    border-color: #00aaff;
  }
  [data-theme="dark"] .nav-tabs .nav-link.active {
    background-color: #444;
    color: #fff;
  }
  [data-theme="dark"] .nav-tabs .nav-link:hover {
    background-color: #444;
    color: #fff;
  }
</style>

<div class="card">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs" id="contactTabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="active-tab" data-bs-toggle="tab" href="#active" role="tab" aria-controls="active" aria-selected="true">Active Contacts</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="archived-tab" data-bs-toggle="tab" href="#archived" role="tab" aria-controls="archived" aria-selected="false">Archived Contacts</a>
      </li>
    </ul>
  </div>
  <div class="card-body">
    <div class="tab-content" id="contactTabsContent">
      <div class="tab-pane fade show active" id="active" role="tabpanel" aria-labelledby="active-tab">
        <a href="{% url 'accounts:contact-create' %}" class="btn btn-primary mb-3">New Contact</a>
        <table class="table table-striped table-fixed">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for contact in active_contacts %}
              <tr>
                <td>{{ contact.name }}</td>
                <td>{{ contact.contact_type }}</td>
                <td>{{ contact.company_email }}</td>
                <td>
                  <a href="{% url 'accounts:contact-detail' contact.pk %}" class="btn btn-sm btn-info">View</a>
                  <a href="{% url 'accounts:contact-update' contact.pk %}" class="btn btn-sm btn-secondary">Edit</a>
                  <a href="{% url 'accounts:contact-archive' contact.pk %}" class="btn btn-sm btn-warning" onclick="return confirm('Are you sure you want to archive this contact?')">Archive</a>
                  <a href="{% url 'accounts:contact-delete' contact.pk %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this contact?')">Delete</a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="4" class="text-center">No active contacts. <a href="{% url 'accounts:contact-create' %}">Start a new contact</a>.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="tab-pane fade" id="archived" role="tabpanel" aria-labelledby="archived-tab">
        <table class="table table-striped table-fixed">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for contact in archived_contacts %}
              <tr>
                <td>{{ contact.name }}</td>
                <td>{{ contact.contact_type }}</td>
                <td>{{ contact.company_email }}</td>
                <td>
                  <a href="{% url 'accounts:contact-detail' contact.pk %}" class="btn btn-sm btn-info">View</a>
                  <a href="{% url 'accounts:contact-update' contact.pk %}" class="btn btn-sm btn-secondary">Edit</a>
                  <a href="{% url 'accounts:contact-unarchive' contact.pk %}" class="btn btn-sm btn-warning">Unarchive</a>
                  <a href="{% url 'accounts:contact-delete' contact.pk %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this contact?')">Delete</a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="4" class="text-center">No archived contacts.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
