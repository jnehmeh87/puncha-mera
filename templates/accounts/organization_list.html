{% extends 'base.html' %}

{% block content %}
<style>
  .table-fixed {
    table-layout: fixed;
    width: 100%;
  }
  .table-fixed th, .table-fixed td {
    width: 50%;
  }
  .nav-tabs .nav-link.active {
    border-color: #00aaff;
  }
  .nav-tabs .nav-link:hover {
    border-color: #00aaff;
  }
  [data-theme="dark"] .nav-tabs .nav-link.active {
    background-color: #444;
    color: #fff;
  }
  [data-theme="dark"] .nav-tabs .nav-link:hover {
    background-color: #444;
    color: #fff;
  }
</style>

<div class="card">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs" id="organizationTabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="active-tab" data-bs-toggle="tab" href="#active" role="tab" aria-controls="active" aria-selected="true">Active Organizations</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="archived-tab" data-bs-toggle="tab" href="#archived" role="tab" aria-controls="archived" aria-selected="false">Archived Organizations</a>
      </li>
    </ul>
  </div>
  <div class="card-body">
    <div class="tab-content" id="organizationTabsContent">
      <div class="tab-pane fade show active" id="active" role="tabpanel" aria-labelledby="active-tab">
        <a href="{% url 'accounts:organization-create' %}" class="btn btn-primary mb-3">New Organization</a>
        <table class="table table-striped table-fixed">
          <thead>
            <tr>
              <th>Name</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for org in active_organizations %}
              <tr>
                <td>{{ org.name }}</td>
                <td>
                  <a href="{% url 'accounts:organization-detail' org.pk %}" class="btn btn-sm btn-info">View</a>
                  <a href="{% url 'accounts:organization-archive' org.pk %}" class="btn btn-sm btn-warning" onclick="return confirm('Are you sure you want to archive this organization?')">Archive</a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="2" class="text-center">No active organizations. <a href="{% url 'accounts:organization-create' %}">Start a new organization</a>.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="tab-pane fade" id="archived" role="tabpanel" aria-labelledby="archived-tab">
        <table class="table table-striped table-fixed">
          <thead>
            <tr>
              <th>Name</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for org in archived_organizations %}
              <tr>
                <td>{{ org.name }}</td>
                <td>
                  <a href="{% url 'accounts:organization-detail' org.pk %}" class="btn btn-sm btn-info">View</a>
                  <a href="{% url 'accounts:organization-unarchive' org.pk %}" class="btn btn-sm btn-warning">Unarchive</a>
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="2" class="text-center">No archived organizations.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
