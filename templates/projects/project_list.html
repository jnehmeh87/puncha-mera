{% extends 'base.html' %}

{% block content %}
<style>
  .table-fixed {
    table-layout: fixed;
    width: 100%;
  }
  .table-fixed th, .table-fixed td {
    width: 33.33%;
  }
  .nav-tabs .nav-link.active {
    border-color: #00aaff;
  }
  .nav-tabs .nav-link:hover {
    border-color: #00aaff;
  }
  [data-theme="dark"] .nav-tabs .nav-link.active {
    background-color: #444;
    color: #fff;
  }
  [data-theme="dark"] .nav-tabs .nav-link:hover {
    background-color: #444;
    color: #fff;
  }
</style>

<div class="card">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs" id="projectTabs" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="active-tab" data-bs-toggle="tab" href="#active" role="tab" aria-controls="active" aria-selected="true">Active Projects</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="archived-tab" data-bs-toggle="tab" href="#archived" role="tab" aria-controls="archived" aria-selected="false">Archived Projects</a>
      </li>
    </ul>
  </div>
  <div class="card-body">
    <div class="tab-content" id="projectTabsContent">
      <div class="tab-pane fade show active" id="active" role="tabpanel" aria-labelledby="active-tab">
        <a href="{% url 'projects:project-create' %}" class="btn btn-primary mb-3">New Project</a>
        <table class="table table-striped table-fixed">
          <thead>
            <tr>
              <th>Name</th>
              <th>Contact</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for project in active_projects %}
              <tr>
                <td>{{ project.name }}</td>
                <td>{{ project.contact }}</td>
                <td>
                  <a href="{% url 'projects:project-detail' project.pk %}" class="btn btn-sm btn-info">View</a>
                  <a href="{% url 'projects:project-update' project.pk %}" class="btn btn-sm btn-secondary">Edit</a>
                  <a href="{% url 'projects:project-archive' project.pk %}" class="btn btn-sm btn-warning" onclick="return confirm('Are you sure you want to archive this project?')">Archive</a>
                  <a href="{% url 'projects:project-delete' project.pk %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this project?')">Delete</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="tab-pane fade" id="archived" role="tabpanel" aria-labelledby="archived-tab">
        <table class="table table-striped table-fixed">
          <thead>
            <tr>
              <th>Name</th>
              <th>Contact</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for project in archived_projects %}
              <tr>
                <td>{{ project.name }}</td>
                <td>{{ project.contact }}</td>
                <td>
                  <a href="{% url 'projects:project-detail' project.pk %}" class="btn btn-sm btn-info">View</a>
                  <a href="{% url 'projects:project-update' project.pk %}" class="btn btn-sm btn-secondary">Edit</a>
                  <a href="{% url 'projects:project-unarchive' project.pk %}" class="btn btn-sm btn-warning">Unarchive</a>
                  <a href="{% url 'projects:project-delete' project.pk %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this project?')">Delete</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}